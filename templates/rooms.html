{% extends "base.html" %}

{% block content %}
<div class="rooms-container">
    <div class="rooms-sidebar">
        <h2>Chat Groups</h2>
        <form method="POST" action="/create_room">
            <input type="text" name="room_name" placeholder="New group name" required>
            <button type="submit">Create Group</button>
        </form>
        <ul class="room-list">
            {% for room in rooms %}
            <li>
                <a href="{{ url_for('chat_room', room_id=room.id) }}">
                    <div class="room-avatar">{{ room.name[0] }}</div>
                    <div class="room-info">
                        <span class="room-name">{{ room.name }}</span>
                        <span class="last-message">
                            {% if room.messages %}
                                {{ room.messages[-1].content[:30] }}{% if room.messages[-1].content|length > 30 %}...{% endif %}
                            {% else %}
                                No messages yet
                            {% endif %}
                        </span>
                    </div>
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>

    <div class="room-chat">
        <div id="current-room">
            Currently in: <span id="current-room-name">{% if current_room %}{{ current_room.name }}{% else %}Select a room{% endif %}</span>
        </div>
        <div id="chat" class="messages-container"></div>
        <div id="message-input-container">
            <input id="message" type="text" placeholder="Type a message..." autocomplete="off" />
            <button id="send">Send</button>
        </div>
    </div>
</div>
{% endblock %}